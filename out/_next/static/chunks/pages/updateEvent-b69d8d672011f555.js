(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[570],{5786:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/updateEvent",function(){return r(1723)}])},1723:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return z}});var n=r(5893),s=r(9008),i=r.n(s),a=r(7160),c=r.n(a),_=r(7856),o=r(7294),l=r(1163),d=r(5084),u=r(186),g=r(6515),h=r(7056),m=r(2853),x=r(9089),p=r.n(x),j=r(2152),f=r(9243);let y=e=>{let{openSnackBar:t,setOpenSnackBar:r,messageText:s,alertType:i}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(f.Z,{open:t,autoHideDuration:8e3,onClose:()=>r(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,n.jsx)(m.Z,{onClick:()=>r(!1),severity:i,sx:{width:"100%"},variant:"filled",children:s})})})};var v=r(1869),b=r(1890),S=r(6779),Z=r(5398),N=r(7745);let E=e=>{let{show:t,handleClose:r,setOtp:s,updateRegistration:i}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(b.Z,{open:t,onClose:r,fullWidth:!0,maxWidth:"sm",children:(0,n.jsxs)("form",{onSubmit:i,children:[(0,n.jsx)(N.Z,{children:"Enter OTP"}),(0,n.jsx)(Z.Z,{children:(0,n.jsx)(u.Z,{margin:"dense",label:"OTP",type:"text",fullWidth:!0,variant:"standard",placeholder:"OTP",onChange:e=>s(e.target.value),required:!0})}),(0,n.jsxs)(S.Z,{children:[(0,n.jsx)(d.Z,{onClick:r,variant:"outlined",style:{borderColor:"#a72f50",color:"#a72f50"},children:"Cancel"}),(0,n.jsx)(d.Z,{variant:"contained",style:{backgroundColor:"#a72f50"},type:"submit",children:"Submit"})]})]})})})},C=()=>{let e=(0,l.useRouter)(),t=e.query,{getParticipants:r,initUpdateRegistration:s,updateRegistration:i}=(0,j.Z)(),[a,c]=(0,o.useState)({}),[_,x]=(0,o.useState)({}),[f,b]=(0,o.useState)({}),[S,Z]=(0,o.useState)({}),[N,C]=(0,o.useState)(!1),[T,z]=(0,o.useState)(!1),[O,M]=(0,o.useState)(!1),[B,P]=(0,o.useState)(""),[k,I]=(0,o.useState)(""),[R,D]=(0,o.useState)("success"),[w,A]=(0,o.useState)({categories:"",runType:"",eventName:""}),[L,V]=(0,o.useState)({pName:!1,pMobile:!1,pEmergencyName:!1,pEmergencyMobile:!1}),[X,F]=(0,o.useState)(""),[U,q]=(0,o.useState)(!1);(0,o.useEffect)(()=>{t.eid&&r(x,t)},[t]),(0,o.useEffect)(()=>{if(t.eid){let e=JSON.parse(localStorage.getItem("selectedEvent"))||"";A({categories:e.category,runType:e.event_type,eventName:e.event_name})}},[t]);let G=_&&_.data&&_.data.length>0&&_.data||[];(0,o.useEffect)(()=>{if(G.length>0){let e=G.filter(e=>!0===e.is_primary);c(e)}},[G]);let H=()=>C(!1),K=()=>{z(!1)},Y=()=>{z(!1),C(!0)},J=(e,t,r)=>{G[r][t]=e,_.data=G,x(_),"name"===t&&null!==e.match(/^ *$/)?(F(r),L.pName=!0,V(L)):"phone"===t&&null!==e.match(/^ *$/)?(F(r),L.pMobile=!0,V(L)):(F(""),L.pName=!1,L.pMobile=!1,V(L)),G.map((e,t)=>{for(let[r,n]of Object.entries(e))"string"==typeof n&&0===n.trim().length&&(F(t),L.pName="name"===r,L.pMobile="phone"===r)});let n=Object.keys(L).some(e=>L[e]);q(n)},Q=(e,t)=>{a[t]=e,c(a),G[0][t]=e,_.data=G,x(_),"emergency_contact_name"===t&&null!==e.match(/^ *$/)?(L.pEmergencyName=!0,V(L)):"emergency_contact_number"===t&&null!==e.match(/^ *$/)?(L.pEmergencyMobile=!0,V(L)):(L.pEmergencyName=!1,L.pEmergencyMobile=!1,V(L));let r=Object.keys(L).some(e=>L[e]);q(r)},W=async e=>{e.preventDefault();try{let r={};r.eventName="INIT_UPDATE_REGISTRATION",r.org_id="runfit-pro",r.order_id=t.oid,r.email_address=t.email,r.event_id=t.eid,z(!0),s(b,r,Y)}catch(n){alert("ERROR: ".concat(n))}},$=(t,r)=>{"Error"===r.errorType?(I("ERROR: Entered OTP is wrong."),D("error"),M(!0)):"OK"===r.success&&(I("Updated participants successfully."),D("success"),M(!0),C(!1),setTimeout(()=>{e.push("/")},2e3))},ee=async e=>{e.preventDefault();try{let t={};t.eventName="UPDATE_REGISTRATION",t.otp=B,t.otp_token=f.data&&f.data.otp_token,t.participants=_.data,i(Z,t,$)}catch(r){I(r),D("error"),M(!0)}};return(0,n.jsxs)(n.Fragment,{children:[_.pending?(0,n.jsx)(v.Z,{open:!0,handleCloseLoader:K}):"",!0!==_.pending&&G&&0===G.length?(0,n.jsx)("div",{className:p().orders,children:(0,n.jsx)("div",{className:p().ordersDiv,children:(0,n.jsx)("div",{children:(0,n.jsx)(m.Z,{severity:"error",color:"error",variant:"outlined",children:"Unable to fetch participants details"})})})}):(0,n.jsx)("form",{onSubmit:W,children:(0,n.jsx)("div",{className:p().orders,children:(0,n.jsx)("div",{className:p().ordersDiv,children:(0,n.jsxs)("div",{className:p().right,style:{width:"100%"},children:[(0,n.jsx)("div",{className:p().orderName,children:(0,n.jsxs)("h2",{children:["Hi,","  ",a&&a.length>0&&a[0].name]})}),(0,n.jsxs)("table",{id:"runTable",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{fontSize:"0.8rem"},children:"EVENT NAME"}),(0,n.jsx)("th",{style:{fontSize:"0.8rem"},children:"TYPE"}),(0,n.jsx)("th",{style:{fontSize:"0.8rem"},children:"PARTICIPANTS"}),(0,n.jsx)("th",{style:{fontSize:"0.8rem"},children:"ORDER ID"}),(0,n.jsx)("th",{style:{fontSize:"0.8rem"},children:"AMOUNT (â‚¹)"})]})}),(0,n.jsx)("tbody",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:{fontSize:"0.8rem"},children:w.eventName}),(0,n.jsx)("td",{style:{fontSize:"0.8rem"},children:w.runType}),(0,n.jsx)("td",{style:{fontSize:"0.8rem"},children:_&&_.data&&_.data.length}),(0,n.jsx)("td",{style:{fontSize:"0.8rem"},children:t.oid}),(0,n.jsxs)("td",{style:{fontSize:"0.8rem"},children:["Rs."," ",_&&_.data&&_.data.length>0&&_.data[0].amount]})]})})]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("h4",{children:"Participants Details"}),(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{fontSize:"0.8rem"},children:"NAME"}),(0,n.jsx)("th",{style:{fontSize:"0.8rem"},children:"BLOOD GROUP"}),(0,n.jsx)("th",{style:{fontSize:"0.8rem"},children:"GENDER"}),(0,n.jsxs)("th",{style:{fontSize:"0.8rem"},children:["RUN TYPE & DISTANCE"," "]}),(0,n.jsx)("th",{style:{fontSize:"0.8rem"},children:"T-SHIRT SIZE"}),(0,n.jsx)("th",{style:{fontSize:"0.8rem"},children:"MOBILE"})]})}),(0,n.jsxs)("tbody",{children:[G.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)(u.Z,{name:"name",type:"text",variant:"standard",size:"small",defaultValue:e.name,onChange:e=>J(e.target.value,"name",t),error:L.pName&&X===t,helperText:L.pName&&X===t?"Incorrect entry.":"",required:!0})}),(0,n.jsx)("td",{children:(0,n.jsxs)(g.Z,{name:"bloodGroup",size:"small",defaultValue:e.blood_group,onChange:e=>J(e.target.value,"blood_group",t),variant:"standard",children:[(0,n.jsx)(h.Z,{value:"O+",children:"O+"}),(0,n.jsx)(h.Z,{value:"O-",children:"O-"}),(0,n.jsx)(h.Z,{value:"A+",children:"A+"}),(0,n.jsx)(h.Z,{value:"A-",children:"A-"}),(0,n.jsx)(h.Z,{value:"B+",children:"B+"}),(0,n.jsx)(h.Z,{value:"B-",children:"B-"}),(0,n.jsx)(h.Z,{value:"AB+",children:"AB+"}),(0,n.jsx)(h.Z,{value:"AB-",children:"AB-"})]})}),(0,n.jsx)("td",{children:(0,n.jsxs)(g.Z,{name:"gender",size:"small",defaultValue:e.sex,onChange:e=>J(e.target.value,"sex",t),variant:"standard",children:[(0,n.jsx)(h.Z,{value:"M",children:"Male"}),(0,n.jsx)(h.Z,{value:"F",children:"Female"}),(0,n.jsx)(h.Z,{value:"O",children:"Other"})]})}),(0,n.jsx)("td",{children:(0,n.jsx)(g.Z,{name:"category",size:"small",defaultValue:e.selected_category,onChange:e=>J(e.target.value,"selected_category",t),variant:"standard",children:w.categories.map((e,t)=>(0,n.jsx)(h.Z,{value:e,children:e},t))})}),(0,n.jsx)("td",{children:(0,n.jsxs)(g.Z,{name:"tshirtSize",size:"small",defaultValue:e.tshirt_size,onChange:e=>J(e.target.value,"tshirt_size",t),variant:"standard",children:[(0,n.jsx)(h.Z,{value:"XS",children:"XS"}),(0,n.jsx)(h.Z,{value:"S",children:"S"}),(0,n.jsx)(h.Z,{value:"M",children:"M"}),(0,n.jsx)(h.Z,{value:"L",children:"L"}),(0,n.jsx)(h.Z,{value:"XL",children:"XL"}),(0,n.jsx)(h.Z,{value:"XXL",children:"XXL"})]})}),(0,n.jsx)("td",{children:(0,n.jsx)(u.Z,{name:"phone",type:"text",variant:"standard",size:"small",defaultValue:e.phone,onChange:e=>J(e.target.value,"phone",t),error:L.pMobile&&X===t,helperText:L.pMobile&&X===t?"Incorrect entry.":"",required:!0})})]},t)),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{colSpan:"2",children:"\xa0"}),(0,n.jsx)("td",{colSpan:"2",children:"\xa0"})]}),(0,n.jsx)("tr",{children:(0,n.jsxs)("td",{colSpan:"4",style:{padding:"0 0 9px 0"},children:[(0,n.jsx)("h4",{children:"Emergency Contact Details"}),(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{fontSize:"0.8rem"},children:"NAME"}),(0,n.jsx)("th",{style:{fontSize:"0.8rem"},children:"CONTACT NUMBER"})]})}),(0,n.jsx)("tbody",{children:a&&a.length>0&&a.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)(u.Z,{name:"emerName",type:"text",variant:"standard",size:"small",defaultValue:e.emergency_contact_name,onChange:e=>Q(e.target.value,"emergency_contact_name"),error:L.pEmergencyName,helperText:L.pEmergencyName?"Incorrect entry.":"",required:!0})}),(0,n.jsx)("td",{children:(0,n.jsx)(u.Z,{name:"emerNumber",type:"text",variant:"standard",size:"small",defaultValue:e.emergency_contact_number,onChange:e=>Q(e.target.value,"emergency_contact_number"),error:L.pEmergencyMobile,helperText:L.pEmergencyMobile?"Incorrect entry.":"",required:!0})})]},t))})]})]})})]})]}),(0,n.jsxs)("div",{className:p().trans,children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("label",{children:"Registered On: "}),(0,n.jsx)("a",{children:a&&a.length>0&&a[0].registered_on})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("label",{children:"\xa0 "}),(0,n.jsx)("a",{children:"\xa0"})]})]}),(0,n.jsx)(d.Z,{style:{float:"right",marginLeft:10,borderColor:"#a72f50",color:"#a72f50"},variant:"outlined",onClick:()=>e.push("/"),children:"Cancel"}),(0,n.jsx)(d.Z,{style:{float:"right",backgroundColor:"#a72f50"},variant:"contained",disabled:U,type:"submit",children:"Update"})]})})})}),(0,n.jsx)(v.Z,{open:T,handleCloseLoader:K}),(0,n.jsx)(E,{show:N,handleClose:H,setOtp:P,updateRegistration:ee}),(0,n.jsx)(y,{openSnackBar:O,setOpenSnackBar:M,messageText:k,alertType:R})]})};function T(){return(0,n.jsxs)("div",{className:c().container,children:[(0,n.jsxs)(i(),{children:[(0,n.jsx)("title",{children:"Seva Bharathi"}),(0,n.jsx)("meta",{name:"description",content:"Kinding Hope & Happiness Around"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(_.Z,{}),(0,n.jsx)(C,{})]})]})}function z(){return(0,n.jsx)(T,{})}},1869:function(e,t,r){"use strict";var n=r(5893);r(7294);var s=r(8735),i=r(754);let a=e=>{let{open:t,handleCloseLoader:r}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.Z,{sx:{color:"white",zIndex:e=>e.zIndex.drawer+1},open:t,onClick:r,children:(0,n.jsx)(i.Z,{color:"inherit"})})})};t.Z=a},9089:function(e){e.exports={header:"registration_succ_header__VRv1f",logo:"registration_succ_logo__JzYBO",mobile:"registration_succ_mobile__15zki",active:"registration_succ_active__jmbN3",submenu:"registration_succ_submenu__damIM",mobile_menu:"registration_succ_mobile_menu__e3M4B",banner:"registration_succ_banner__9uK7_",bannerTxt:"registration_succ_bannerTxt__mlZrm",emailContact:"registration_succ_emailContact__sksqP",formLabel:"registration_succ_formLabel__N0tzU",numberIncrease:"registration_succ_numberIncrease__P1ct9",registerFor:"registration_succ_registerFor__jlklP",contentBlock:"registration_succ_contentBlock__jK5rS",leftBlock:"registration_succ_leftBlock__KVPIv",rightBlock:"registration_succ_rightBlock__1PETo",count:"registration_succ_count__LpX8N",imageCircle:"registration_succ_imageCircle__qdaBt",imageCount:"registration_succ_imageCount__aKC3d",eventGallery:"registration_succ_eventGallery__TOeh0",astraBlock:"registration_succ_astraBlock__X9rst",right:"registration_succ_right__JPXXY",joinMission:"registration_succ_joinMission__w1ETZ",left:"registration_succ_left__MUCEO",sponsors:"registration_succ_sponsors___fHiR",sponserList:"registration_succ_sponserList__c6BeF",sponserPatners:"registration_succ_sponserPatners__duWsL",leftPatner:"registration_succ_leftPatner__6rkwi",rightPatner:"registration_succ_rightPatner__QjFMR",powerdBy:"registration_succ_powerdBy__wS9Nu",footer:"registration_succ_footer__gsRbo",stadiumRun:"registration_succ_stadiumRun__xB3x_",addParticipant:"registration_succ_addParticipant__ZoQUF","close-btn":"registration_succ_close-btn__cfqLb",gender:"registration_succ_gender__Qx_h6",run:"registration_succ_run__dD8dG",apply:"registration_succ_apply__LQoY7",coupon:"registration_succ_coupon__2AQow",couponDiscount:"registration_succ_couponDiscount__myhJw",greyButton:"registration_succ_greyButton__0iM4z",redButton:"registration_succ_redButton__hwDHA",breadcrumb:"registration_succ_breadcrumb__E3NJh",modalPopup:"registration_succ_modalPopup__eBI26",pay:"registration_succ_pay__0pFkv",close:"registration_succ_close__A9J6z",pay_amount:"registration_succ_pay_amount__DmMrq",leftImage:"registration_succ_leftImage__IHKvQ",pay_amount_content:"registration_succ_pay_amount_content__V6SmV",lang:"registration_succ_lang__tslvD",registration:"registration_succ_registration__7PIvh",reg_help:"registration_succ_reg_help__V02MK",no:"registration_succ_no__4v0E9",email:"registration_succ_email__uayYM",registration_message:"registration_succ_registration_message__zf6IV",info:"registration_succ_info__i8ag_",info_image:"registration_succ_info_image__8l8j0",girl_image:"registration_succ_girl_image__idTfg",social_icons:"registration_succ_social_icons__haYa3",order:"registration_succ_order__3AdVf",run_success:"registration_succ_run_success__pvfM7",successInfo:"registration_succ_successInfo__e4E9M",succ_count:"registration_succ_succ_count__7abGf",participants_run:"registration_succ_participants_run__8Kgvo",name:"registration_succ_name__rJUXo",count_mt:"registration_succ_count_mt__vlR1y",loginDiv:"registration_succ_loginDiv__J_Qao",loginHeader:"registration_succ_loginHeader__Z8CMr",loginTxt:"registration_succ_loginTxt__DZjeJ",orders:"registration_succ_orders__ZCufQ",ordersDiv:"registration_succ_ordersDiv___MSkw",search:"registration_succ_search__uArDp",tabs:"registration_succ_tabs__0jh_x",tabContent:"registration_succ_tabContent__tiKaT",green:"registration_succ_green__RZpjP",yellow:"registration_succ_yellow__axwze",red:"registration_succ_red__yf9uA",download:"registration_succ_download__aD6nZ",otpVerify:"registration_succ_otpVerify__bPIGA",runTable:"registration_succ_runTable__dcOLF",trans:"registration_succ_trans__t5Kpq",orderName:"registration_succ_orderName__OexWE",profile:"registration_succ_profile__2PRyH","btn-group":"registration_succ_btn-group__Y2Zry","btn-check":"registration_succ_btn-check__YMl_Y",btn:"registration_succ_btn__uNg1D",show:"registration_succ_show__x5nsG","payment-failed":"registration_succ_payment-failed__a0TZt",leftContent:"registration_succ_leftContent__LbogY",rightContent:"registration_succ_rightContent__snS4Z",help_center:"registration_succ_help_center__3mhoc",last:"registration_succ_last__SCv7E",mobile_menu_response:"registration_succ_mobile_menu_response__qe8fD"}},7160:function(){},9008:function(e,t,r){e.exports=r(3121)}},function(e){e.O(0,[110,966,856,131,774,888,179],function(){return e(e.s=5786)}),_N_E=e.O()}]);